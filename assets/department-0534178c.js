import{i as u,_ as C,d as T,o as D,c as y,a as f,b as l,w as d,F as E,E as s,e as k,f as U,g as W,h as L,j as N,k as I,l as r,m as z,n as $,p as B,q as v}from"./index-74fb4b2e.js";/* empty css                        *//* empty css                 */const q=e=>u.request({url:"api/department/all",data:e}),P=e=>u.request({url:"api/department/delete",params:e}),F=e=>u.request({url:"api/department/add",method:"post",data:e}),S=e=>u.request({url:"api/department/edit",method:"post",data:e}),A=T({data(){return{departments:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},department:{createTime:"",deleted:0,departCode:"",departDesc:"",departName:"",departType:"",id:0,schoolId:0,updateTime:""},DialogVisible:!1,EditDialogVisible:!1}},mounted(){this.getdepartments()},methods:{pageChange(e){this.pageinfo.currentPage=e,this.getdepartments()},getdepartments(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),t=this.pageinfo.currentPage*this.pageinfo.pageSize;q().then(i=>{if(i.success)this.departments=i.data.departments.slice(e,t),this.pageinfo.totalpage=i.data.departments.length;else return s(i.msg),!1}).catch(i=>{console.log(i)})},addDepartment(){this.DialogVisible=!0},confirmAdd(){const e=this.department;F(e).then(t=>{this.getdepartments()}).catch(t=>{console.log(t)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.department=k(e)},confirmEdit(){let e=this.department;S(e).then(t=>{if(t.success)this.EditDialogVisible=!1,this.getdepartments(),s(t.msg);else return s(t.msg),!1}).catch(t=>{s("网络错误联系管理员")})},del(e){console.log(e);const t={id:e};U.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{s({type:"success",message:"删除成功"}),P(t).then(i=>{if(i.success)this.getdepartments();else return console.log(i.msg),!1}).catch(i=>{console.log(i)})}).catch(()=>{s({type:"info",message:"在考虑一下"})})}}}),M={class:"head"},j={class:"dialog-footer"},O={class:"dialog-footer"};function G(e,t,i,H,J,K){const m=W,p=z,g=L,V=N,o=$,n=B,b=v,h=I;return D(),y(E,null,[f("div",M,[l(m,{link:"",type:"primary",size:"small",onClick:e.addDepartment},{default:d(()=>[r("添加一个部门")]),_:1},8,["onClick"]),l(g,{data:e.departments,style:{width:"100%"}},{default:d(()=>[l(p,{fixed:"",prop:"id",label:"id",width:"150"}),l(p,{prop:"departName",label:"departName",width:"120"}),l(p,{prop:"departCode",label:"departCode",width:"120"}),l(p,{prop:"departDesc",label:"departDesc",width:"120"}),l(p,{prop:"departType",label:"departType",width:"120"}),l(p,{prop:"schoolId",label:"schoolId",width:"120"}),l(p,{prop:"createTime",label:"createTime",width:"120"}),l(p,{prop:"deleted",label:"deleted",width:"120"}),l(p,{prop:"updateTime",label:"updateTime",width:"120"}),l(p,{fixed:"right",label:"Operations",width:"120"},{default:d(a=>[l(m,{link:"",type:"primary",size:"small",onClick:w=>e.edit(a.row)},{default:d(()=>[r("修改")]),_:2},1032,["onClick"]),l(m,{link:"",type:"primary",size:"small",onClick:w=>e.del(a.row.id)},{default:d(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(V,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),l(h,{modelValue:e.DialogVisible,"onUpdate:modelValue":t[9]||(t[9]=a=>e.DialogVisible=a),title:"添加部门信息",width:"50%",center:""},{footer:d(()=>[f("span",j,[l(m,{onClick:t[8]||(t[8]=a=>e.DialogVisible=!1)},{default:d(()=>[r("Cancel")]),_:1}),l(m,{type:"primary",onClick:e.confirmAdd},{default:d(()=>[r(" Confirm ")]),_:1},8,["onClick"])])]),default:d(()=>[l(b,{model:e.department},{default:d(()=>[l(n,{label:"departName","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.department.departName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departCode","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departCode,"onUpdate:modelValue":t[1]||(t[1]=a=>e.department.departCode=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departDesc","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departDesc,"onUpdate:modelValue":t[2]||(t[2]=a=>e.department.departDesc=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departType","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departType,"onUpdate:modelValue":t[3]||(t[3]=a=>e.department.departType=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"schoolId","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.schoolId,"onUpdate:modelValue":t[4]||(t[4]=a=>e.department.schoolId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.createTime,"onUpdate:modelValue":t[5]||(t[5]=a=>e.department.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.deleted,"onUpdate:modelValue":t[6]||(t[6]=a=>e.department.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.updateTime,"onUpdate:modelValue":t[7]||(t[7]=a=>e.department.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(h,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":t[19]||(t[19]=a=>e.EditDialogVisible=a),title:"修改部门信息",width:"50%",center:""},{footer:d(()=>[f("span",O,[l(m,{onClick:t[18]||(t[18]=a=>e.EditDialogVisible=!1)},{default:d(()=>[r("Cancel")]),_:1}),l(m,{type:"primary",onClick:e.confirmEdit},{default:d(()=>[r(" Confirm ")]),_:1},8,["onClick"])])]),default:d(()=>[l(b,{model:e.department},{default:d(()=>[l(n,{label:"departName","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departName,"onUpdate:modelValue":t[10]||(t[10]=a=>e.department.departName=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departCode","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departCode,"onUpdate:modelValue":t[11]||(t[11]=a=>e.department.departCode=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departDesc","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departDesc,"onUpdate:modelValue":t[12]||(t[12]=a=>e.department.departDesc=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departType","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.departType,"onUpdate:modelValue":t[13]||(t[13]=a=>e.department.departType=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"schoolId","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.schoolId,"onUpdate:modelValue":t[14]||(t[14]=a=>e.department.schoolId=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.createTime,"onUpdate:modelValue":t[15]||(t[15]=a=>e.department.createTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.deleted,"onUpdate:modelValue":t[16]||(t[16]=a=>e.department.deleted=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:d(()=>[l(o,{modelValue:e.department.updateTime,"onUpdate:modelValue":t[17]||(t[17]=a=>e.department.updateTime=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=C(A,[["render",G]]);export{Y as default};
