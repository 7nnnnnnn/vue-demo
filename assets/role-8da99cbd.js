import{i as p,_ as y,d as C,o as T,c as E,a as f,b as o,w as a,F as k,E as m,e as D,f as U,g as W,h as L,j as N,k as c,l as u,m as z,n as $,p as v,q as B}from"./index-770b6677.js";/* empty css                        *//* empty css                 */const q=e=>p.request({url:"api/role/all",data:e}),h=e=>p.request({url:"api/role/delete",params:e}),P=e=>p.request({url:"api/role/add",method:"post",data:e}),F=e=>p.request({url:"api/role/edit",method:"post",data:e}),S=C({data(){return{Roles:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},Role:{createTime:"",deleted:0,description:"",id:0,roleName:"",status:0,updateTime:""},DialogVisible:!1,EditDialogVisible:!1}},mounted(){this.getdormitorys()},methods:{tested(){console.log("2#A211".split("")),console.log("a12")},dsort(e){for(var l=0;l<e.length;l++)e[l].id=l+1;return e},pageChange(e){this.pageinfo.currentPage=e,this.getdormitorys()},getdormitorys(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),l=this.pageinfo.currentPage*this.pageinfo.pageSize;q().then(i=>{if(i.success)this.pageinfo.totalpage=i.data.roles.length,this.Roles=i.data.roles.slice(e,l),m(i.msg);else return m(i.msg),!1;console.log(i)}).catch(i=>{console.log(i)})},adddormitory(){this.DialogVisible=!0},confirmAdd(){const e=this.Role;P(e).then(l=>{this.getdormitorys()}).catch(l=>{console.log(l)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.Role=D(e)},confirmEdit(){let e=this.Role;console.log(e),F(e).then(l=>{if(l.success)this.EditDialogVisible=!1,this.getdormitorys(),m(l.msg);else return m(l.msg),!1}).catch(l=>{m("网络错误联系管理员")})},del(e){console.log(e);const l={id:e};U.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"再考虑一下",type:"warning"}).then(()=>{m({type:"success",message:"删除成功"}),h(l).then(i=>{if(i.success)this.getdormitorys();else return console.log(i.msg),!1}).catch(i=>{console.log(i)})}).catch(()=>{m({type:"info",message:"再考虑一下"})})},delall(){for(let e=1;e<=this.pageinfo.totalpage;e++)h({id:e}).then(i=>{if(i.success)this.getdormitorys();else return console.log(i.msg),!1}).catch(i=>{console.log(i)})}}}),A={class:"head"},I={class:"dialog-footer"},M={class:"dialog-footer"};function j(e,l,i,O,G,H){const r=W,s=z,V=L,w=N,d=$,n=v,g=B,b=c;return T(),E(k,null,[f("div",A,[o(r,{link:"",type:"primary",size:"small",onClick:e.adddormitory},{default:a(()=>[u("添加")]),_:1},8,["onClick"]),o(V,{data:e.Roles,style:{width:"100%"}},{default:a(()=>[o(s,{fixed:"",prop:"id",label:"id",width:"150"}),o(s,{prop:"deleted",label:"deleted",width:"120"}),o(s,{prop:"description",label:"description",width:"120"}),o(s,{prop:"createTime",label:"createTime",width:"120"}),o(s,{prop:"roleName",label:"roleName",width:"120"}),o(s,{prop:"status",label:"status",width:"120"}),o(s,{prop:"updateTime",label:"updateTime",width:"120"}),o(s,{fixed:"right",label:"Operations",width:"120"},{default:a(t=>[o(r,{link:"",type:"primary",size:"small",onClick:R=>e.edit(t.row)},{default:a(()=>[u("修改")]),_:2},1032,["onClick"]),o(r,{link:"",type:"primary",size:"small",onClick:R=>e.del(t.row.id)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(w,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),o(b,{modelValue:e.DialogVisible,"onUpdate:modelValue":l[8]||(l[8]=t=>e.DialogVisible=t),title:"添加",width:"50%",center:""},{footer:a(()=>[f("span",I,[o(r,{onClick:l[7]||(l[7]=t=>e.DialogVisible=!1)},{default:a(()=>[u("Cancel")]),_:1}),o(r,{type:"primary",onClick:e.confirmAdd},{default:a(()=>[u(" Confirm ")]),_:1},8,["onClick"])])]),default:a(()=>[o(g,{model:e.Role},{default:a(()=>[o(n,{label:"id","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.id,"onUpdate:modelValue":l[0]||(l[0]=t=>e.Role.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"deleted","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.deleted,"onUpdate:modelValue":l[1]||(l[1]=t=>e.Role.deleted=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"description","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.description,"onUpdate:modelValue":l[2]||(l[2]=t=>e.Role.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"createTime","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.createTime,"onUpdate:modelValue":l[3]||(l[3]=t=>e.Role.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"roleName","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.roleName,"onUpdate:modelValue":l[4]||(l[4]=t=>e.Role.roleName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"status","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.status,"onUpdate:modelValue":l[5]||(l[5]=t=>e.Role.status=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"updateTime","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.updateTime,"onUpdate:modelValue":l[6]||(l[6]=t=>e.Role.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(b,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":l[17]||(l[17]=t=>e.EditDialogVisible=t),title:"修改",width:"50%",center:""},{footer:a(()=>[f("span",M,[o(r,{onClick:l[16]||(l[16]=t=>e.EditDialogVisible=!1)},{default:a(()=>[u("Cancel")]),_:1}),o(r,{type:"primary",onClick:e.confirmEdit},{default:a(()=>[u(" Confirm ")]),_:1},8,["onClick"])])]),default:a(()=>[o(g,{model:e.Role},{default:a(()=>[o(n,{label:"id","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.id,"onUpdate:modelValue":l[9]||(l[9]=t=>e.Role.id=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"deleted","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.deleted,"onUpdate:modelValue":l[10]||(l[10]=t=>e.Role.deleted=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"description","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.description,"onUpdate:modelValue":l[11]||(l[11]=t=>e.Role.description=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"createTime","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.createTime,"onUpdate:modelValue":l[12]||(l[12]=t=>e.Role.createTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"roleName","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.roleName,"onUpdate:modelValue":l[13]||(l[13]=t=>e.Role.roleName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"status","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.status,"onUpdate:modelValue":l[14]||(l[14]=t=>e.Role.status=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(n,{label:"updateTime","label-width":e.formLabelWidth},{default:a(()=>[o(d,{modelValue:e.Role.updateTime,"onUpdate:modelValue":l[15]||(l[15]=t=>e.Role.updateTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const X=y(S,[["render",j]]);export{X as default};
