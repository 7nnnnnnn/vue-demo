import{i as r,_ as C,d as T,o as D,c as y,a as f,b as l,w as d,F as k,E as u,e as E,f as U,g as W,h as L,j as I,k as N,l as s,m as z,n as A,p as v,q as $}from"./index-770b6677.js";/* empty css                        *//* empty css                 */const B=e=>r.request({url:"api/admin/all",data:e}),P=e=>r.request({url:"api/admin/delete",params:e}),q=e=>r.request({url:"api/admin/add",method:"post",data:e}),F=e=>r.request({url:"api/admin/edit",method:"post",data:e}),S=T({data(){return{admins:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},admin:{createTime:"",deleted:0,departCode:"",departDesc:"",departName:"",departType:"",id:0,schoolId:0,updateTime:""},DialogVisible:!1,EditDialogVisible:!1}},mounted(){this.getadmins()},methods:{pageChange(e){this.pageinfo.currentPage=e,this.getadmins()},getadmins(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),a=this.pageinfo.currentPage*this.pageinfo.pageSize;B().then(m=>{if(m.success)this.admins=m.data.admins.slice(e,a),this.pageinfo.totalpage=m.data.admins.length;else return u(m.msg),!1}).catch(m=>{console.log(m)})},addAdmin(){this.DialogVisible=!0},confirmAdd(){const e=this.admin;q(e).then(a=>{this.getadmins()}).catch(a=>{console.log(a)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.admin=E(e)},confirmEdit(){let e=this.admin;F(e).then(a=>{if(a.success)this.EditDialogVisible=!1,this.getadmins(),u(a.msg);else return u(a.msg),!1}).catch(a=>{u("网络错误联系管理员")})},del(e){console.log(e);const a={id:e};U.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{u({type:"success",message:"删除成功"}),P(a).then(m=>{if(m.success)this.getadmins();else return console.log(m.msg),!1}).catch(m=>{console.log(m)})}).catch(()=>{u({type:"info",message:"在考虑一下"})})}}}),M={class:"head"},j={class:"dialog-footer"},O={class:"dialog-footer"};function G(e,a,m,H,J,K){const p=W,t=z,V=L,h=I,i=A,n=v,b=$,g=N;return D(),y(k,null,[f("div",M,[l(p,{link:"",type:"primary",size:"small",onClick:e.AddAdmin},{default:d(()=>[s("添加一个用户")]),_:1},8,["onClick"]),l(V,{data:e.admins,style:{width:"100%"}},{default:d(()=>[l(t,{porp:"id",labal:"ID"}),l(t,{prop:"username",label:"用户名"}),l(t,{prop:"nickname",label:"昵称"}),l(t,{prop:"avatar",label:"头像"}),l(t,{prop:"email",label:"邮箱"}),l(t,{prop:"mobile",label:"手机"}),l(t,{prop:"loginfailure",label:"登录失败次数"}),l(t,{prop:"lastlogintime",label:"登录时间"}),l(t,{prop:"lastloginip",label:"登录IP"}),l(t,{prop:"password",label:"密码"}),l(t,{prop:"salt",label:"密码盐"}),l(t,{prop:"motto",abel:"签名"}),l(t,{prop:"update_time",label:"更新时间"}),l(t,{prop:"status",label:"状态:0=禁用,1=启用"}),l(t,{prop:"id",label:"ID"}),l(t,{prop:"username",label:"用户名"}),l(t,{prop:"nickname",label:"昵称"}),l(t,{prop:"avatar",label:"头像"}),l(t,{prop:"email",label:"邮箱"}),l(t,{prop:"mobile",abel:"手机"}),l(t,{prop:"loginfailure",label:"登录失败次数"}),l(t,{fixed:"right",label:"Operations",width:"120"},{default:d(o=>[l(p,{link:"",type:"primary",size:"small",onClick:w=>e.edit(o.row)},{default:d(()=>[s("修改")]),_:2},1032,["onClick"]),l(p,{link:"",type:"primary",size:"small",onClick:w=>e.del(o.row.id)},{default:d(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(h,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),l(g,{modelValue:e.DialogVisible,"onUpdate:modelValue":a[9]||(a[9]=o=>e.DialogVisible=o),title:"添加部门信息",width:"50%",center:""},{footer:d(()=>[f("span",j,[l(p,{onClick:a[8]||(a[8]=o=>e.DialogVisible=!1)},{default:d(()=>[s("Cancel")]),_:1}),l(p,{type:"primary",onClick:e.confirmAdd},{default:d(()=>[s(" Confirm ")]),_:1},8,["onClick"])])]),default:d(()=>[l(b,{model:e.admin},{default:d(()=>[l(n,{label:"departName","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.admin.departName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departCode","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departCode,"onUpdate:modelValue":a[1]||(a[1]=o=>e.admin.departCode=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departDesc","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departDesc,"onUpdate:modelValue":a[2]||(a[2]=o=>e.admin.departDesc=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departType","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departType,"onUpdate:modelValue":a[3]||(a[3]=o=>e.admin.departType=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"schoolId","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.schoolId,"onUpdate:modelValue":a[4]||(a[4]=o=>e.admin.schoolId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.createTime,"onUpdate:modelValue":a[5]||(a[5]=o=>e.admin.createTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.deleted,"onUpdate:modelValue":a[6]||(a[6]=o=>e.admin.deleted=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.updateTime,"onUpdate:modelValue":a[7]||(a[7]=o=>e.admin.updateTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(g,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":a[19]||(a[19]=o=>e.EditDialogVisible=o),title:"修改部门信息",width:"50%",center:""},{footer:d(()=>[f("span",O,[l(p,{onClick:a[18]||(a[18]=o=>e.EditDialogVisible=!1)},{default:d(()=>[s("Cancel")]),_:1}),l(p,{type:"primary",onClick:e.confirmEdit},{default:d(()=>[s(" Confirm ")]),_:1},8,["onClick"])])]),default:d(()=>[l(b,{model:e.admin},{default:d(()=>[l(n,{label:"departName","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departName,"onUpdate:modelValue":a[10]||(a[10]=o=>e.admin.departName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departCode","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departCode,"onUpdate:modelValue":a[11]||(a[11]=o=>e.admin.departCode=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departDesc","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departDesc,"onUpdate:modelValue":a[12]||(a[12]=o=>e.admin.departDesc=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"departType","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.departType,"onUpdate:modelValue":a[13]||(a[13]=o=>e.admin.departType=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"schoolId","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.schoolId,"onUpdate:modelValue":a[14]||(a[14]=o=>e.admin.schoolId=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"createTime","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.createTime,"onUpdate:modelValue":a[15]||(a[15]=o=>e.admin.createTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"deleted","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.deleted,"onUpdate:modelValue":a[16]||(a[16]=o=>e.admin.deleted=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(n,{label:"updateTime","label-width":e.formLabelWidth},{default:d(()=>[l(i,{modelValue:e.admin.updateTime,"onUpdate:modelValue":a[17]||(a[17]=o=>e.admin.updateTime=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=C(S,[["render",G]]);export{Y as default};
