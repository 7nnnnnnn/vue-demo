import{i as m,_ as S,d as z,o as p,c as V,a as g,b as a,w as s,F as C,E as f,e as D,f as L,g as B,h as U,j as P,p as I,k as W,l as r,r as A,m as M,n as v,q,s as F,t as $,u as T}from"./index-770b6677.js";/* empty css                 *//* empty css                        */const N=e=>m.request({url:"api/classinfo/all",data:e}),O=e=>m.request({url:"api/classinfo/delete",params:e}),G=e=>m.request({url:"api/classinfo/add",method:"post",data:e}),H=e=>m.request({url:"api/classinfo/edit",method:"post",data:e});function J(e,l,n){return request({url:"api/classinfo/getClassinfoBySchoolAndDepartAndMajor",method:"get",params:{school:e,depart:l,major:n}})}function K(e,l){return request({url:"api/classinfo/getClassinfosPage",method:"get",params:{pageNum:e,pageSize:l}})}function w(e){return request({url:"api/classinfo/getClassinfosForSelectByMajorId",method:"get",params:{majorId:e}})}const Q=z({data(){return{school:"",depart:"",major:"",majorId:"",majorList:[],currentPage:1,pageSize:10,total:0,classList:[],classinfos:[],pageinfo:{currentPage:1,pageSize:5,totalpage:10},classinfo:{depart:"",id:0,major:"",name:"",school:"",state:0},DialogVisible:!1,EditDialogVisible:!1}},mounted(){this.getclassinfos(),this.getClassinfosPage()},methods:{pageChange(e){this.pageinfo.currentPage=e,this.getclassinfos()},getclassinfos(){let e=this.pageinfo.pageSize*(this.pageinfo.currentPage-1),l=this.pageinfo.currentPage*this.pageinfo.pageSize;N().then(n=>{if(n.success)this.classinfos=n.data.classinfos.slice(e,l),this.pageinfo.totalpage=n.data.classinfos.length;else return f(n.msg),!1}).catch(n=>{console.log(n)})},addclassinfo(){this.DialogVisible=!0},confirmAdd(){const e=this.classinfo;G(e).then(l=>{this.getclassinfos()}).catch(l=>{console.log(l)}),this.DialogVisible=!1},edit(e){this.EditDialogVisible=!0,this.classinfo=D(e)},confirmEdit(){let e=this.classinfo;H(e).then(l=>{if(l.success)this.EditDialogVisible=!1,this.getclassinfos(),f(l.msg);else return f(l.msg),!1}).catch(l=>{f("网络错误联系管理员")})},del(e){console.log(e);const l={id:e};L.confirm("是否确认删除","Warning",{confirmButtonText:"确认删除",cancelButtonText:"在考虑一下",type:"warning"}).then(()=>{f({type:"success",message:"删除成功"}),O(l).then(n=>{if(n.success)this.getclassinfos();else return console.log(n.msg),!1}).catch(n=>{console.log(n)})}).catch(()=>{f({type:"info",message:"在考虑一下"})})},async getClassinfoBySchoolAndDepartAndMajor(){const{data:e}=await J(this.school,this.depart,this.major);this.classList=e},handleSizeChange(e){this.pageSize=e,this.getClassinfosPage()},handleCurrentChange(e){this.currentPage=e,this.getClassinfosPage()},async getClassinfosPage(){const{data:e}=await K(this.currentPage,this.pageSize);this.classList=e.list,this.total=e.total},async getClassinfosForSelectByMajorId(){const{data:e}=await w(this.majorId);this.classList=e},async getClassinfosForSelectByMajorId(){const{data:e}=await w(this.majorId);this.classList=e}}}),R={class:"head"},X={class:"dialog-footer"},Y={class:"dialog-footer"};function Z(e,l,n,_,x,ee){const d=B,u=M,y=U,h=P,i=v,t=I,c=q,b=W,j=T,k=F;return p(),V(C,null,[g("div",R,[a(d,{link:"",type:"primary",size:"small",onClick:e.addclassinfo},{default:s(()=>[r("添加一个班级")]),_:1},8,["onClick"]),a(y,{data:e.classinfos,style:{width:"100%"}},{default:s(()=>[a(u,{fixed:"",prop:"id",label:"id",width:"150"}),a(u,{prop:"name",label:"name",width:"120"}),a(u,{prop:"state",label:"state",width:"120"}),a(u,{prop:"school",label:"school",width:"120"}),a(u,{prop:"depart",label:"depart",width:"120"}),a(u,{prop:"major",label:"major",width:"120"}),a(u,{fixed:"right",label:"Operations",width:"120"},{default:s(o=>[a(d,{link:"",type:"primary",size:"small",onClick:E=>e.edit(o.row)},{default:s(()=>[r("修改")]),_:2},1032,["onClick"]),a(d,{link:"",type:"primary",size:"small",onClick:E=>e.del(o.row.id)},{default:s(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(h,{layout:"prev, pager, next",total:e.pageinfo.totalpage,"page-size":e.pageinfo.pageSize,onCurrentChange:e.pageChange},null,8,["total","page-size","onCurrentChange"])]),a(b,{modelValue:e.DialogVisible,"onUpdate:modelValue":l[6]||(l[6]=o=>e.DialogVisible=o),title:"添加班级信息",width:"50%",center:""},{footer:s(()=>[g("span",X,[a(d,{onClick:l[5]||(l[5]=o=>e.DialogVisible=!1)},{default:s(()=>[r("Cancel")]),_:1}),a(d,{type:"primary",onClick:e.confirmAdd},{default:s(()=>[r(" Confirm ")]),_:1},8,["onClick"])])]),default:s(()=>[a(c,{model:e.classinfo},{default:s(()=>[a(t,{label:"name","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.classinfo.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"state","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.state,"onUpdate:modelValue":l[1]||(l[1]=o=>e.classinfo.state=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"school","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.school,"onUpdate:modelValue":l[2]||(l[2]=o=>e.classinfo.school=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"depart","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.depart,"onUpdate:modelValue":l[3]||(l[3]=o=>e.classinfo.depart=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"major","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.major,"onUpdate:modelValue":l[4]||(l[4]=o=>e.classinfo.major=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(b,{modelValue:e.EditDialogVisible,"onUpdate:modelValue":l[13]||(l[13]=o=>e.EditDialogVisible=o),title:"修改班级信息",width:"50%",center:""},{footer:s(()=>[g("span",Y,[a(d,{onClick:l[12]||(l[12]=o=>e.EditDialogVisible=!1)},{default:s(()=>[r("Cancel")]),_:1}),a(d,{type:"primary",onClick:e.confirmEdit},{default:s(()=>[r(" Confirm ")]),_:1},8,["onClick"])])]),default:s(()=>[a(c,{model:e.classinfo},{default:s(()=>[a(t,{label:"name","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.name,"onUpdate:modelValue":l[7]||(l[7]=o=>e.classinfo.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"state","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.state,"onUpdate:modelValue":l[8]||(l[8]=o=>e.classinfo.state=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"school","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.school,"onUpdate:modelValue":l[9]||(l[9]=o=>e.classinfo.school=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"depart","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.depart,"onUpdate:modelValue":l[10]||(l[10]=o=>e.classinfo.depart=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),a(t,{label:"major","label-width":e.formLabelWidth},{default:s(()=>[a(i,{modelValue:e.classinfo.major,"onUpdate:modelValue":l[11]||(l[11]=o=>e.classinfo.major=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(t,{label:"学校"},{default:s(()=>[a(i,{modelValue:e.school,"onUpdate:modelValue":l[14]||(l[14]=o=>e.school=o)},null,8,["modelValue"])]),_:1}),a(t,{label:"院系"},{default:s(()=>[a(i,{modelValue:e.depart,"onUpdate:modelValue":l[15]||(l[15]=o=>e.depart=o)},null,8,["modelValue"])]),_:1}),a(t,{label:"专业"},{default:s(()=>[a(i,{modelValue:e.major,"onUpdate:modelValue":l[16]||(l[16]=o=>e.major=o)},null,8,["modelValue"])]),_:1}),a(d,{type:"primary",onClick:e.getClassinfoBySchoolAndDepartAndMajor},{default:s(()=>[r("查询")]),_:1},8,["onClick"]),a(h,{onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange,"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),a(t,{label:"学校"},{default:s(()=>[a(i,{modelValue:e.school,"onUpdate:modelValue":l[17]||(l[17]=o=>e.school=o)},null,8,["modelValue"])]),_:1}),a(d,{type:"primary",onClick:e.getClassinfosPageBySchool},{default:s(()=>[r("查询")]),_:1},8,["onClick"]),a(t,{label:"专业"},{default:s(()=>[a(k,{modelValue:e.majorId,"onUpdate:modelValue":l[18]||(l[18]=o=>e.majorId=o),placeholder:"请选择"},{default:s(()=>[(p(!0),V(C,null,A(e.majorList,o=>(p(),$(j,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})],64)}const se=S(Q,[["render",Z]]);export{se as default};
