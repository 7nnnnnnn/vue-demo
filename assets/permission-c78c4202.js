import{_ as w,E as a,f as y,y as _,o as f,c as z,a as b,b as e,w as i,z as G,F as N,g as O,n as R,h as K,j as M,k as j,t as A,l as T,A as q,m as H,p as J,B as Q,u as W,s as X,q as Y}from"./index-74fb4b2e.js";/* empty css                        *//* empty css                 */import{a as h}from"./backend_api-b53d56ff.js";const Z={created(){this.GetAll()},computed:{paginatedData(){const t=(this.currentPage-1)*this.pageSize,l=t+this.pageSize;return this.filteredApiList.slice(t,l)},filteredApiList(){return this.searchText&&this.apiList?this.apiList.filter(t=>t.id==this.searchText):this.apiList}},data(){return{editedAPI:{},editDialogVisible:!1,currentPage:1,pageSize:6,searchText:"",apiList:[]}},methods:{handlePageChange(t){this.currentPage=t},clearSearch(){this.searchText=""},Cancel(){this.editDialogVisible=!1,a.info("保存取消！")},Getone(t){this.apiList=[],h.getOneData(t).then(l=>{console.log("搜索成功！"),a.success("搜索成功！");const m=l.data.backendApi;this.apiList.push(m)}).catch(l=>{a.error("搜索失败！"),console.log("搜索失败！")})},Save(){console.log("Saving API:",this.editedAPI);const t=this.apiList.findIndex(l=>l.id===this.editedAPI.id);t!==-1?this.apiList.splice(t,1,this.editedAPI):this.apiList.push(this.editedAPI),this.editDialogVisible=!1,a.success("保存成功！")},openEditDialog(t){this.editedAPI={...t},this.editDialogVisible=!0},editAPI(t){console.log("编辑 API",t)},deleteAPI(t){y.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.delData(t.id).then(l=>{if(l.success){const m=this.apiList.findIndex(I=>I.id===t.id);m!==-1&&this.apiList.splice(m,1),console.log("删除成功"),a.success("删除成功！")}else a.error(l.msg),console.error(l.msg)}).catch(l=>{console.error(l)}),console.log("删除 API")}).catch(l=>{console.log("不删除 API",l)})},deleteData(t){y.confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const l=this.apiList.findIndex(m=>m.id===t.id);l!==-1&&this.apiList.splice(l,1),a.success("删除成功！")}).catch(()=>{a.error("删除失败！"),console.log("取消删除 API",t)})},addAPI(){a.success("添加数据ing");const t={code:"",createTime:"",deleted:0,description:"",hasChildren:0,id:0,pid:0,type:"",updateTime:"",url:"",isNew:!0};this.apiList.push(t)},async GetAll(){try{this.clearSearch();const t=await h.getAllData();if(t.success){const l=t.data.backendApis;this.apiList=l,a.success("刷新成功！")}else a.error("请求失败！"),console.error(t.msg)}catch(t){console.error(t)}},Insert(t){h.addData(t).then(l=>{delete t.isNew,a.success("添加成功！"),console.log("添加成功！")}).catch(l=>{a.error("添加失败！"),console.log("添加失败！")})},Alter(t){h.editData(t).then(l=>{console.log("修改成功！"),a.success("修改成功！")}).catch(l=>{console.log("修改失败！"),a.error("修改失败！")})}}},$={class:"dialog-footer"};function ee(t,l,m,I,n,d){const k=_("Search"),p=q,r=O,u=R,s=H,V=_("Position"),x=_("EditPen"),C=_("Delete"),E=K,D=M,v=_("CirclePlusFilled"),L=_("RefreshRight"),c=J,S=Q,g=W,U=X,B=Y,F=j;return f(),z(N,null,[b("div",null,[e(u,{modelValue:n.searchText,"onUpdate:modelValue":l[1]||(l[1]=o=>n.searchText=o),placeholder:"请输入搜索关键字",clearable:"",onClear:d.clearSearch,onKeyup:G(t.performSearch,["enter"]),style:{"margin-bottom":"20px"}},{append:i(()=>[e(r,{circle:"",type:"danger",onClick:l[0]||(l[0]=o=>d.Getone(this.searchText))},{default:i(()=>[e(p,null,{default:i(()=>[e(k)]),_:1})]),_:1})]),_:1},8,["modelValue","onClear","onKeyup"])]),b("div",null,[e(E,{data:d.paginatedData,"header-cell-style":{background:"#eef1f6",color:"#606266"},border:""},{default:i(()=>[e(s,{prop:"id",label:"id"}),e(s,{prop:"code",label:"code"}),e(s,{prop:"createTime",label:"createTime"}),e(s,{prop:"deleted",label:"deleted"}),e(s,{prop:"description",label:"description"}),e(s,{prop:"hasChildren",label:"hasChildren"}),e(s,{prop:"pid",label:"pid"}),e(s,{prop:"type",label:"type"}),e(s,{prop:"updateTime",label:"updateTime"}),e(s,{prop:"url",label:"url"}),e(s,{label:"操作","min-width":"100px"},{default:i(({row:o})=>[o.isNew?(f(),A(r,{key:0,class:"custom-button",type:"success",circle:"",onClick:P=>d.Insert(o)},{default:i(()=>[e(p,null,{default:i(()=>[e(V)]),_:1})]),_:2},1032,["onClick"])):(f(),A(r,{key:1,class:"custom-button",type:"warning",circle:"",onClick:P=>d.Alter(o)},{default:i(()=>[e(p,null,{default:i(()=>[e(V)]),_:1})]),_:2},1032,["onClick"])),e(r,{type:"primary",circle:"",onClick:P=>d.openEditDialog(o)},{default:i(()=>[e(p,null,{default:i(()=>[e(x)]),_:1})]),_:2},1032,["onClick"]),o.isNew?(f(),A(r,{key:2,type:"danger",circle:"",onClick:P=>d.deleteData(o)},{default:i(()=>[e(p,null,{default:i(()=>[e(C)]),_:1})]),_:2},1032,["onClick"])):(f(),A(r,{key:3,type:"danger",circle:"",onClick:P=>d.deleteAPI(o)},{default:i(()=>[e(p,null,{default:i(()=>[e(C)]),_:1})]),_:2},1032,["onClick"]))]),_:1})]),_:1},8,["data"]),e(D,{"current-page":n.currentPage,"page-size":n.pageSize,total:d.filteredApiList.length,onCurrentChange:d.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"]),e(r,{type:"primary",circle:"",onClick:d.addAPI,style:{"margin-top":"10px"}},{default:i(()=>[e(p,null,{default:i(()=>[e(v)]),_:1})]),_:1},8,["onClick"]),e(r,{type:"primary",circle:"",onClick:d.GetAll,style:{"margin-top":"10px"}},{default:i(()=>[e(p,null,{default:i(()=>[e(L)]),_:1})]),_:1},8,["onClick"]),e(F,{modelValue:n.editDialogVisible,"onUpdate:modelValue":l[12]||(l[12]=o=>n.editDialogVisible=o),title:"编辑内容",center:"",width:"50%"},{footer:i(()=>[b("span",$,[e(r,{onClick:d.Cancel},{default:i(()=>[T("取消")]),_:1},8,["onClick"]),e(r,{type:"primary",onClick:d.Save},{default:i(()=>[T(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[e(B,{model:n.editedAPI},{default:i(()=>[e(c,{label:"id",disabled:""},{default:i(()=>[e(u,{modelValue:n.editedAPI.id,"onUpdate:modelValue":l[2]||(l[2]=o=>n.editedAPI.id=o),disabled:""},null,8,["modelValue"])]),_:1}),e(c,{label:"code"},{default:i(()=>[e(u,{modelValue:n.editedAPI.code,"onUpdate:modelValue":l[3]||(l[3]=o=>n.editedAPI.code=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"createTime"},{default:i(()=>[e(u,{modelValue:n.editedAPI.createTime,"onUpdate:modelValue":l[4]||(l[4]=o=>n.editedAPI.createTime=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"deleted"},{default:i(()=>[e(u,{modelValue:n.editedAPI.deleted,"onUpdate:modelValue":l[5]||(l[5]=o=>n.editedAPI.deleted=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"description"},{default:i(()=>[e(u,{modelValue:n.editedAPI.description,"onUpdate:modelValue":l[6]||(l[6]=o=>n.editedAPI.description=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"hasChildren"},{default:i(()=>[e(S,{modelValue:n.editedAPI.hasChildren,"onUpdate:modelValue":l[7]||(l[7]=o=>n.editedAPI.hasChildren=o),"active-color":"#409EFF","inactive-color":"#C0CCDA","active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),e(c,{label:"pid"},{default:i(()=>[e(u,{modelValue:n.editedAPI.pid,"onUpdate:modelValue":l[8]||(l[8]=o=>n.editedAPI.pid=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"type"},{default:i(()=>[e(U,{modelValue:n.editedAPI.type,"onUpdate:modelValue":l[9]||(l[9]=o=>n.editedAPI.type=o)},{default:i(()=>[e(g,{label:"GET",value:"GET"}),e(g,{label:"POST",value:"POST"}),e(g,{label:"PUT",value:"PUT"}),e(g,{label:"DELETE",value:"DELETE"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"updateTime"},{default:i(()=>[e(u,{modelValue:n.editedAPI.updateTime,"onUpdate:modelValue":l[10]||(l[10]=o=>n.editedAPI.updateTime=o)},null,8,["modelValue"])]),_:1}),e(c,{label:"url"},{default:i(()=>[e(u,{modelValue:n.editedAPI.url,"onUpdate:modelValue":l[11]||(l[11]=o=>n.editedAPI.url=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])],64)}const ne=w(Z,[["render",ee]]);export{ne as default};
